{
  "version": 3,
  "sources": ["../../src/utils/esbuild-utils.ts"],
  "sourcesContent": ["import { build as esbuild, LogLevel, BuildResult, OutputFile } from 'esbuild'\n\ntype BaseProps<W extends boolean> = {\n  cwd: string\n  outfile: string\n  minify?: boolean\n  sourcemap?: boolean\n  bundle?: boolean\n  logLevel?: LogLevel\n  write: W\n}\n\nexport type BuildCodeProps<W extends boolean> = BaseProps<W> & {\n  code: string\n}\n\nexport type BuildEntrypointProps<W extends boolean> = BaseProps<W> & {\n  entrypoint: string\n}\n\nconst keepNames = true // important : https://github.com/node-fetch/node-fetch/issues/784#issuecomment-1014768204\n\nexport function buildCode(p: BuildCodeProps<true>): Promise<BuildResult>\nexport function buildCode(p: BuildCodeProps<false>): Promise<BuildResult & { outputFiles: OutputFile[] }>\nexport function buildCode<W extends boolean>({\n  cwd,\n  minify = true,\n  bundle = true,\n  sourcemap = false,\n  logLevel = 'silent',\n  outfile,\n  code,\n  write,\n}: BuildCodeProps<W>) {\n  return esbuild({\n    stdin: {\n      contents: code,\n      resolveDir: cwd,\n      loader: 'ts',\n    },\n    logOverride: {\n      'equals-negative-zero': 'silent',\n    },\n    platform: 'node',\n    target: 'es2020',\n    sourcemap,\n    minify,\n    bundle,\n    outfile,\n    absWorkingDir: cwd,\n    logLevel,\n    keepNames,\n    write,\n  })\n}\n\nexport function buildEntrypoint(p: BuildEntrypointProps<true>): Promise<BuildResult>\nexport function buildEntrypoint(p: BuildEntrypointProps<false>): Promise<BuildResult & { outputFiles: OutputFile[] }>\nexport function buildEntrypoint<W extends boolean>({\n  cwd,\n  minify = true,\n  bundle = true,\n  sourcemap = false,\n  logLevel = 'silent',\n  outfile,\n  entrypoint,\n  write,\n}: BuildEntrypointProps<W>) {\n  return esbuild({\n    entryPoints: [entrypoint],\n    logOverride: {\n      'equals-negative-zero': 'silent',\n    },\n    platform: 'node',\n    target: 'es2020',\n    sourcemap,\n    minify,\n    bundle,\n    outfile,\n    absWorkingDir: cwd,\n    logLevel,\n    keepNames,\n    write,\n  })\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAoE;AAoBpE,MAAM,YAAY;AAIX,SAAS,UAA6B;AAAA,EAC3C;AAAA,EACA,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AACF,GAAsB;AACpB,aAAO,eAAAA,OAAQ;AAAA,IACb,OAAO;AAAA,MACL,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,QAAQ;AAAA,IACV;AAAA,IACA,aAAa;AAAA,MACX,wBAAwB;AAAA,IAC1B;AAAA,IACA,UAAU;AAAA,IACV,QAAQ;AAAA,IACR;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AACH;AAIO,SAAS,gBAAmC;AAAA,EACjD;AAAA,EACA,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,WAAW;AAAA,EACX;AAAA,EACA;AAAA,EACA;AACF,GAA4B;AAC1B,aAAO,eAAAA,OAAQ;AAAA,IACb,aAAa,CAAC,UAAU;AAAA,IACxB,aAAa;AAAA,MACX,wBAAwB;AAAA,IAC1B;AAAA,IACA,UAAU;AAAA,IACV,QAAQ;AAAA,IACR;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AACH;",
  "names": ["esbuild"]
}
